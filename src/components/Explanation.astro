---
import Icon from './Icon.astro';
import MarkdownRenderer from './MarkdownRenderer.astro';
---

<div class="explanation-container mt-4 pt-4 border-top border-light">
    <button type="button" class="btn btn-primary explain-button">Explain Answer?</button>
    <div class="explanation-content hidden">
        <h4 class="fs-6 mb-2 text-dark">Explanation:</h4>
        <div class="markdown-renderer"></div>
    </div>
    <div class="loading-spinner hidden">
        <Icon name="spinner" className="animate-spin" />
        <span>Loading explanation...</span>
    </div>
    <div class="error-alert hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"></div>
</div>

<script>
    document.querySelectorAll('.explanation-container').forEach(container => {
        const explainButton = container.querySelector('.explain-button');
        const explanationContent = container.querySelector('.explanation-content');
        const markdownRenderer = container.querySelector('.markdown-renderer');
        const loadingSpinner = container.querySelector('.loading-spinner');
        const errorAlert = container.querySelector('.error-alert');

        explainButton.addEventListener('click', async () => {
            // Logic to fetch and display explanation will go here
            // This will need access to questionPaper, index, and updateHistory
            // which is not available in this component's script.
            // This will need to be handled in the parent component's script.
        });
    });
</script>
